#******************************************************************************
#* Copyright Â© 2018 by @author Mike Sharkey <mike@8bitgeek.net>
#* All Rights Reserved
#*****************************************************************************/
TARGET=ezapp.linux

PREFIX=/usr/bin/

CC=$(PREFIX)gcc
LD=$(PREFIX)gcc
AR=$(PREFIX)ar
AS=$(PREFIX)as
CP=$(PREFIX)objcopy
OD=$(PREFIX)objdump
SE=$(PREFIX)size

CFLAGS  = -std=gnu99 -ggdb -O0 -Wall
LFLAGS = -Wl,-Map=$(TARGET).map

INCLUDE =  -I ./
INCLUDE += -I ./ezapp/src -I ./ezapp/src/platform/linux
INCLUDE += -I ./src -I ./src/platform

SRCS += ezapp/src/platform/linux/ezbus_thread.c
SRCS += ezapp/src/platform/linux/ezbus_signal.c
SRCS += ezapp/src/platform/linux/fault.c
SRCS += ezapp/src/platform/linux/main.c

SRCS += src/ezbus_hex.c
SRCS += src/ezbus_address.c
SRCS += src/ezbus_crc.c
SRCS += src/ezbus_instance.c
SRCS += src/ezbus_packet.c
SRCS += src/ezbus_packet_queue.c
SRCS += src/ezbus_platform.c
SRCS += src/ezbus_port.c
SRCS += src/ezbus_peer.c

$(TARGET): $(SRCS) 
		$(CC) $(LFLAGS) $(INCLUDE) $(CFLAGS) $^ -o $@

clean:
		rm -f *.o $(TARGET) $(TARGET).map

