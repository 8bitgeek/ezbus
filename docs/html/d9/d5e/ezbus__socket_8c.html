<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>EzBus: src/socket/ezbus_socket.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EzBus
   </div>
   <div id="projectbrief">EzBus RS-485 Token Bus Network Protocol</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d9/d5e/ezbus__socket_8c.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ezbus_socket.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="../../dd/d0f/ezbus__socket_8h_source.html">ezbus_socket.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dd/dd2/ezbus__socket__common_8h_source.html">ezbus_socket_common.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d0/d18/ezbus__mac__transmitter_8h_source.html">ezbus_mac_transmitter.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d6/dda/ezbus__mac__token_8h_source.html">ezbus_mac_token.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d6/ded/ezbus__mac__peers_8h_source.html">ezbus_mac_peers.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d2/d54/ezbus__mac_8h_source.html">ezbus_mac.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d2/dc4/ezbus__packet_8h_source.html">ezbus_packet.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d8/d0c/ezbus__parcel_8h_source.html">ezbus_parcel.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../db/de8/ezbus__log_8h_source.html">ezbus_log.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ezbus_socket.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/dcb/ezbus__socket_8c__incl.png" border="0" usemap="#src_2socket_2ezbus__socket_8c" alt=""/></div>
<map name="src_2socket_2ezbus__socket_8c" id="src_2socket_2ezbus__socket_8c">
<area shape="rect" id="node2" href="../../dd/d0f/ezbus__socket_8h.html" title="ezbus_socket.h" alt="" coords="151,80,265,107"/>
<area shape="rect" id="node6" href="../../d2/dc4/ezbus__packet_8h.html" title="ezbus_packet.h" alt="" coords="293,304,408,331"/>
<area shape="rect" id="node7" href="../../d8/d0c/ezbus__parcel_8h.html" title="ezbus_parcel.h" alt="" coords="145,379,255,405"/>
<area shape="rect" id="node10" href="../../d2/d54/ezbus__mac_8h.html" title="ezbus_mac.h" alt="" coords="566,155,666,181"/>
<area shape="rect" id="node12" href="../../dd/dd2/ezbus__socket__common_8h.html" title="ezbus_socket_common.h" alt="" coords="347,80,517,107"/>
<area shape="rect" id="node13" href="../../d0/d18/ezbus__mac__transmitter_8h.html" title="ezbus_mac_transmitter.h" alt="" coords="593,80,762,107"/>
<area shape="rect" id="node14" href="../../d6/dda/ezbus__mac__token_8h.html" title="ezbus_mac_token.h" alt="" coords="949,80,1088,107"/>
<area shape="rect" id="node16" href="../../d6/ded/ezbus__mac__peers_8h.html" title="ezbus_mac_peers.h" alt="" coords="787,80,925,107"/>
<area shape="rect" id="node18" href="../../db/de8/ezbus__log_8h.html" title="ezbus_log.h" alt="" coords="1109,155,1201,181"/>
<area shape="rect" id="node3" href="../../de/d13/ezbus__platform_8h.html" title="ezbus_platform.h" alt="" coords="564,453,687,480"/>
<area shape="rect" id="node5" href="../../dd/dd6/ezbus__fault_8h.html" title="ezbus_fault.h" alt="" coords="6,603,106,629"/>
<area shape="rect" id="node4" href="../../d3/d83/ezbus__const_8h.html" title="ezbus_const.h" alt="" coords="332,528,439,555"/>
<area shape="rect" id="node8" href="../../da/d3d/ezbus__address_8h.html" title="ezbus_address.h" alt="" coords="331,379,453,405"/>
<area shape="rect" id="node9" href="../../da/d49/ezbus__crc_8h.html" title="ezbus_crc.h" alt="" coords="579,379,672,405"/>
<area shape="rect" id="node11" href="../../df/dee/ezbus__port_8h.html" title="ezbus_port.h" alt="" coords="523,229,621,256"/>
<area shape="rect" id="node15" href="../../dd/d68/ezbus__timer_8h.html" title="ezbus_timer.h" alt="" coords="1024,229,1128,256"/>
<area shape="rect" id="node17" href="../../de/dc3/ezbus__peer_8h.html" title="ezbus_peer.h" alt="" coords="798,304,898,331"/>
</map>
</div>
</div>
<p><a href="../../d9/d5e/ezbus__socket_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa69558c210d80a1f30de674be771a598"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#aa69558c210d80a1f30de674be771a598">ezbus_socket_init</a> (void)</td></tr>
<tr class="memdesc:aa69558c210d80a1f30de674be771a598"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the socket layer, and must be invoked once prior to using any socket functions Invocation must take place from with the thre ad context of the consumer of the API.  <a href="#aa69558c210d80a1f30de674be771a598">More...</a><br /></td></tr>
<tr class="separator:aa69558c210d80a1f30de674be771a598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e384a3a2ce36815ec276ea4ea8949f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d83/ezbus__const_8h.html#a687a358e975e608a5913449ab7a7581f">ezbus_socket_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a40e384a3a2ce36815ec276ea4ea8949f">ezbus_socket_open</a> (<a class="el" href="../../d2/d54/ezbus__mac_8h.html#a30f60fee515bd4643c026ba35ab3fcb2">ezbus_mac_t</a> *mac, <a class="el" href="../../d1/dbf/unionezbus__address__t.html">ezbus_address_t</a> *peer)</td></tr>
<tr class="memdesc:a40e384a3a2ce36815ec276ea4ea8949f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a tranceiver channel (socket) with a peer node.  <a href="#a40e384a3a2ce36815ec276ea4ea8949f">More...</a><br /></td></tr>
<tr class="separator:a40e384a3a2ce36815ec276ea4ea8949f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdaa8395ed35ee2baffb9a195f80c7dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#acdaa8395ed35ee2baffb9a195f80c7dd">ezbus_socket_close</a> (<a class="el" href="../../d3/d83/ezbus__const_8h.html#a687a358e975e608a5913449ab7a7581f">ezbus_socket_t</a> socket)</td></tr>
<tr class="memdesc:acdaa8395ed35ee2baffb9a195f80c7dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a previously opened socket. Once invoked, the socket can no longer be referenced. See also <a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a40e384a3a2ce36815ec276ea4ea8949f">ezbus_socket_open()</a>  <a href="#acdaa8395ed35ee2baffb9a195f80c7dd">More...</a><br /></td></tr>
<tr class="separator:acdaa8395ed35ee2baffb9a195f80c7dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99ce7232f1cc46f952399e909e932406"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a99ce7232f1cc46f952399e909e932406">ezbus_socket_is_open</a> (<a class="el" href="../../d3/d83/ezbus__const_8h.html#a687a358e975e608a5913449ab7a7581f">ezbus_socket_t</a> socket)</td></tr>
<tr class="memdesc:a99ce7232f1cc46f952399e909e932406"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to determine if a given socket is currently open and available for use.  <a href="#a99ce7232f1cc46f952399e909e932406">More...</a><br /></td></tr>
<tr class="separator:a99ce7232f1cc46f952399e909e932406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54097a6ae9ab26d44ccd2c3560b8e2a5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a54097a6ae9ab26d44ccd2c3560b8e2a5">ezbus_socket_send</a> (<a class="el" href="../../d3/d83/ezbus__const_8h.html#a687a358e975e608a5913449ab7a7581f">ezbus_socket_t</a> socket, void *data, size_t size)</td></tr>
<tr class="memdesc:a54097a6ae9ab26d44ccd2c3560b8e2a5"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a54097a6ae9ab26d44ccd2c3560b8e2a5">ezbus_socket_send()</a> must be sync'ed with ezbus_tranceiver_callback_send() When ezbus_tranceiver_callback_send() is invoked, and consumer has data to send, then consumer should invoke <a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a54097a6ae9ab26d44ccd2c3560b8e2a5">ezbus_socket_send()</a>. Bye return <code>true</code> from ezbus_tranceiver_callback_send(), the consumer signals the desire to have the packet transmitted, otherwise the prepared parcel packet will remain dormant until such time that 'true' is returned by ezbus_tranceiver_callback_send().  <a href="#a54097a6ae9ab26d44ccd2c3560b8e2a5">More...</a><br /></td></tr>
<tr class="separator:a54097a6ae9ab26d44ccd2c3560b8e2a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a659127fbd84dc28f7b6e8eebd2fa7b7c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a659127fbd84dc28f7b6e8eebd2fa7b7c">ezbus_socket_recv</a> (<a class="el" href="../../d3/d83/ezbus__const_8h.html#a687a358e975e608a5913449ab7a7581f">ezbus_socket_t</a> socket, void *data, size_t size)</td></tr>
<tr class="memdesc:a659127fbd84dc28f7b6e8eebd2fa7b7c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a659127fbd84dc28f7b6e8eebd2fa7b7c">ezbus_socket_recv()</a> must be sync'ed with ezbus_tranceiver_callback_recv() When ezbus_tranceiver_callback_recv() is invoked, and the consumer wishes to receive the data, then the consumer should invoke <a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a659127fbd84dc28f7b6e8eebd2fa7b7c">ezbus_socket_recv()</a> to extract the packet parcel data. Returning <code>true</code> will initiate an <code>ack</code> response to the received parcel packet. otherwise a <code>nack</code> response.  <a href="#a659127fbd84dc28f7b6e8eebd2fa7b7c">More...</a><br /></td></tr>
<tr class="separator:a659127fbd84dc28f7b6e8eebd2fa7b7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9bf71f2fb552ebf54e4c7157eb980d22"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/dd2/ezbus__socket__common_8h.html#ab0568451b91f17215bdf3e04ac013821">ezbus_socket_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a9bf71f2fb552ebf54e4c7157eb980d22">ezbus_sockets</a> [<a class="el" href="../../d3/d83/ezbus__const_8h.html#aaef1b46f54abf7fcbfc4298aed8ec7d7">EZBUS_MAX_SOCKETS</a>]</td></tr>
<tr class="separator:a9bf71f2fb552ebf54e4c7157eb980d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="acdaa8395ed35ee2baffb9a195f80c7dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ezbus_socket_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d83/ezbus__const_8h.html#a687a358e975e608a5913449ab7a7581f">ezbus_socket_t</a>&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a previously opened socket. Once invoked, the socket can no longer be referenced. See also <a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a40e384a3a2ce36815ec276ea4ea8949f">ezbus_socket_open()</a> </p>

<p>Definition at line <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html#l00061">61</a> of file <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html">ezbus_socket.c</a>.</p>

<p>References <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html#l00070">ezbus_socket_is_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aa69558c210d80a1f30de674be771a598"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ezbus_socket_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the socket layer, and must be invoked once prior to using any socket functions Invocation must take place from with the thre ad context of the consumer of the API. </p>

<p>Definition at line <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html#l00041">41</a> of file <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html">ezbus_socket.c</a>.</p>

<p>References <a class="el" href="../../dc/d2e/ezbus__platform__caribou_8c_source.html#l00092">ezbus_platform_memset()</a>, and <a class="el" href="../../db/dd2/ezbus__socket__common_8c_source.html#l00027">ezbus_socket_max()</a>.</p>

</div>
</div>
<a class="anchor" id="a99ce7232f1cc46f952399e909e932406"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ezbus_socket_is_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d83/ezbus__const_8h.html#a687a358e975e608a5913449ab7a7581f">ezbus_socket_t</a>&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to determine if a given socket is currently open and available for use. </p>

<p>Definition at line <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html#l00070">70</a> of file <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html">ezbus_socket.c</a>.</p>

<p>References <a class="el" href="../../db/dd2/ezbus__socket__common_8c_source.html#l00041">ezbus_socket_mac()</a>.</p>

<p>Referenced by <a class="el" href="../../db/df7/ezbus__socket__callback_8c_source.html#l00038">ezbus_socket_callback_transmitter_empty()</a>, <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html#l00061">ezbus_socket_close()</a>, <a class="el" href="../../db/dd2/ezbus__socket__common_8c_source.html#l00066">ezbus_socket_rx_packet()</a>, <a class="el" href="../../db/dd2/ezbus__socket__common_8c_source.html#l00088">ezbus_socket_rx_seq()</a>, <a class="el" href="../../db/dd2/ezbus__socket__common_8c_source.html#l00109">ezbus_socket_set_rx_seq()</a>, <a class="el" href="../../db/dd2/ezbus__socket__common_8c_source.html#l00099">ezbus_socket_set_tx_seq()</a>, and <a class="el" href="../../db/dd2/ezbus__socket__common_8c_source.html#l00077">ezbus_socket_tx_seq()</a>.</p>

</div>
</div>
<a class="anchor" id="a40e384a3a2ce36815ec276ea4ea8949f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d83/ezbus__const_8h.html#a687a358e975e608a5913449ab7a7581f">ezbus_socket_t</a> ezbus_socket_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d54/ezbus__mac_8h.html#a30f60fee515bd4643c026ba35ab3fcb2">ezbus_mac_t</a> *&#160;</td>
          <td class="paramname"><em>mac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dbf/unionezbus__address__t.html">ezbus_address_t</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a tranceiver channel (socket) with a peer node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mac</td><td>The MAC interface instance to use for this socket connection. </td></tr>
    <tr><td class="paramname">peer</td><td>The peer node address to connect this socket to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new socket handle, or EZBUS_SOCKET_INVALID if the request could not be successfuly completed. See <a class="el" href="../../db/dd2/ezbus__socket__common_8c.html#a69da5de1567a448bb59ca03c9dfe787b">ezbus_socket_err()</a>. Most likely cause of faulure is that ezbus_socket_count() has reached <a class="el" href="../../db/dd2/ezbus__socket__common_8c.html#af4835d5177936114faff1f98fb208ca3">ezbus_socket_mac()</a>. A finite number of sockets may be open at any one time, as defined by EZBUS_NUM_SOCKETS. When an unsolicited packet arrives when no more sockets are available, the incoming parcel packet is rejected with a 'nack'. </dd></dl>

<p>Definition at line <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html#l00047">47</a> of file <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html">ezbus_socket.c</a>.</p>

<p>References <a class="el" href="../../dc/d2e/ezbus__platform__caribou_8c_source.html#l00092">ezbus_platform_memset()</a>, <a class="el" href="../../d3/d83/ezbus__const_8h_source.html#l00029">EZBUS_SOCKET_INVALID</a>, <a class="el" href="../../dd/dd2/ezbus__socket__common_8h_source.html#l00036">_ezbus_socket_state_t::mac</a>, and <a class="el" href="../../dd/dd2/ezbus__socket__common_8h_source.html#l00037">_ezbus_socket_state_t::peer</a>.</p>

<p>Referenced by <a class="el" href="../../db/df7/ezbus__socket__callback_8c_source.html#l00085">ezbus_socket_callback_receiver_ready()</a>.</p>

</div>
</div>
<a class="anchor" id="a659127fbd84dc28f7b6e8eebd2fa7b7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ezbus_socket_recv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d83/ezbus__const_8h.html#a687a358e975e608a5913449ab7a7581f">ezbus_socket_t</a>&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a659127fbd84dc28f7b6e8eebd2fa7b7c">ezbus_socket_recv()</a> must be sync'ed with ezbus_tranceiver_callback_recv() When ezbus_tranceiver_callback_recv() is invoked, and the consumer wishes to receive the data, then the consumer should invoke <a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a659127fbd84dc28f7b6e8eebd2fa7b7c">ezbus_socket_recv()</a> to extract the packet parcel data. Returning <code>true</code> will initiate an <code>ack</code> response to the received parcel packet. otherwise a <code>nack</code> response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>Integer value that references the given socket connection, <a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a40e384a3a2ce36815ec276ea4ea8949f">ezbus_socket_open()</a> The local socket to reply on will be resocketed by invoking <a class="el" href="../../d7/d51/ezbus__packet_8c.html#a04f93a42f3d22ef4754ae457206f0be3">ezbus_packet_dst_socket()</a>. </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the destination storage for received bytes. Storage must be large enough to store <code>size</code> bytes. </td></tr>
    <tr><td class="paramname">size</td><td>The maximum number of bytes to extract from the parcel packet. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes actually copied to <code>data</code>. </dd></dl>

<p>Definition at line <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html#l00082">82</a> of file <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html">ezbus_socket.c</a>.</p>

<p>References <a class="el" href="../../dc/d2e/ezbus__platform__caribou_8c_source.html#l00092">ezbus_platform_memset()</a>, <a class="el" href="../../d3/d83/ezbus__const_8h_source.html#l00029">EZBUS_SOCKET_INVALID</a>, <a class="el" href="../../db/dd2/ezbus__socket__common_8c_source.html#l00041">ezbus_socket_mac()</a>, and <a class="el" href="../../db/dd2/ezbus__socket__common_8c_source.html#l00027">ezbus_socket_max()</a>.</p>

</div>
</div>
<a class="anchor" id="a54097a6ae9ab26d44ccd2c3560b8e2a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ezbus_socket_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d83/ezbus__const_8h.html#a687a358e975e608a5913449ab7a7581f">ezbus_socket_t</a>&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a54097a6ae9ab26d44ccd2c3560b8e2a5">ezbus_socket_send()</a> must be sync'ed with ezbus_tranceiver_callback_send() When ezbus_tranceiver_callback_send() is invoked, and consumer has data to send, then consumer should invoke <a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a54097a6ae9ab26d44ccd2c3560b8e2a5">ezbus_socket_send()</a>. Bye return <code>true</code> from ezbus_tranceiver_callback_send(), the consumer signals the desire to have the packet transmitted, otherwise the prepared parcel packet will remain dormant until such time that 'true' is returned by ezbus_tranceiver_callback_send(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>Integer value that references the given socket connection, <a class="el" href="../../d9/d5e/ezbus__socket_8c.html#a40e384a3a2ce36815ec276ea4ea8949f">ezbus_socket_open()</a> </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the data bytes to transmit. May be of arbitrary length, however, all of the data bytes may not be transmitted, see return value for usage suggestion. </td></tr>
    <tr><td class="paramname">size</td><td>Represents the total nbumber of bytes to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes sent. If return is &lt; <code>size</code> and &gt; 0 tis indicates that the transmission was successful, however not all bytes where transmitted. In this case, the consumer may choose to use the return value to continue to transmit the remaining bytes. If 0 is returned, then the socket was unable to transmit the bytes at this time (be sure to synchronize ezbus_tranceiver_send() with ezbus_tranceiver_callback_send() to ensure that it is an appropriate time to populate a transmitter packet. If -1 is returned, then a fault has occured, and () will return the nature of the failure. </dd></dl>

<p>Definition at line <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html#l00076">76</a> of file <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html">ezbus_socket.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a9bf71f2fb552ebf54e4c7157eb980d22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/dd2/ezbus__socket__common_8h.html#ab0568451b91f17215bdf3e04ac013821">ezbus_socket_state_t</a> ezbus_sockets[<a class="el" href="../../d3/d83/ezbus__const_8h.html#aaef1b46f54abf7fcbfc4298aed8ec7d7">EZBUS_MAX_SOCKETS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html#l00033">33</a> of file <a class="el" href="../../d9/d5e/ezbus__socket_8c_source.html">ezbus_socket.c</a>.</p>

<p>Referenced by <a class="el" href="../../db/dd2/ezbus__socket__common_8c_source.html#l00032">ezbus_socket_at()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_9ad1227260954e346101f3844f0abb3d.html">socket</a></li><li class="navelem"><a class="el" href="../../d9/d5e/ezbus__socket_8c.html">ezbus_socket.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
